<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Long Louis learn Js</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
</head>

<body>
    <div class="container w-75 mt-5">
        <table class="table">
            <tbody class="my-2">
                <tr>
                    <div class="form-floating form-group my-2">
                        <select class="form-select" id="banksSelect" aria-label="Floating label select example">
                            <option value="ICB">(970415) VietinBank</option>
                            <option value="VCB" selected>(970436) Vietcombank</option>
                            <option value="BIDV">(970418) BIDV</option>
                            <option value="VBA">(970405) Agribank</option>
                            <option value="OCB">(970448) OCB</option>
                            <option value="MB">(970422) MBBank</option>
                            <option value="TCB">(970407) Techcombank</option>
                            <option value="ACB">(970416) ACB</option>
                            <option value="VPB">(970432) VPBank</option>
                            <option value="TPB">(970423) TPBank</option>
                            <option value="STB">(970403) Sacombank</option>
                            <option value="HDB">(970437) HDBank</option>
                        </select>
                        <label for="banksSelect">Chọn ngân hàng</label>
                    </div>
                </tr>
                <tr>
                    <div class="form-group my-2">
                        <label for="accountId">Nhập số tài khoản</label>
                        <input type="text" class="form-control" id="accountId" aria-describedby=""
                            placeholder="Số tài khoản" value="1027784255">
                    </div>
                </tr>
                <tr>
                    <div class="form-group my-2">
                        <label for="accountName">Nhập tên chủ sở hữu</label>
                        <input type="text" class="form-control" id="accountName" aria-describedby=""
                            placeholder="Tên chủ sở hữu" value="NGUYEN THANH LONG">
                    </div>
                </tr>
                <tr>
                    <div class="form-group my-2">
                        <label for="accountName">Nhập nội dung chuyển khoản</label>
                        <input type="text" class="form-control" id="bankingDescription" aria-describedby=""
                            placeholder="Nội dung chuyển khoản" value="">
                    </div>
                </tr>
                <tr>
                    <div class="form-group my-2 position-relative">
                    <label for="amount">Nhập giá tiền</label>
                    <div class="d-flex">
                        <input type="number" class="form-control" id="amount" placeholder="Giá tiền">
                        <button type="button" id="clearAmount" class="btn btn-outline-secondary ms-2">Xóa</button>
                    </div>
                </div>
                
                </tr>
                <tr>
                    <div class="form-group my-2 text-center">
                        <button type="button" class="btn btn-primary" onclick="createQR();">Tạo</button>
                    </div>
                </tr>
            </tbody>
        </table>
        <div class="form-group my-2 text-center">
            <img class="w-100" src="" id="qrCode" alt="">
        </div>
    </div>
    <script>
        const qrCode = document.getElementById("qrCode");
        const bankElement = document.getElementById("banksSelect");
        const accountIdElement = document.getElementById("accountId");
        const accountNameElement = document.getElementById("accountName");
        const bankingDescriptionElement = document.getElementById("bankingDescription");
        const amountElement = document.getElementById("amount");

        function createQR() {
            let bankIdDefault = "VCB"
            let accountIdDefault = "1027784255"
            let bankingDescriptionDefault = "Thanh%20toan%20Xanh%20SM%20Bike";
            let accountNameDefault = "Nguyen Thanh Long";

            let bankId = (bankElement?.value?.trim() === "") ? bankIdDefault : (bankElement?.value ?? bankIdDefault);
            let accountId = (accountIdElement?.value?.trim() === "") ? accountIdDefault : (accountIdElement?.value ?? accountIdDefault);
            let bankingDescription = (bankingDescriptionElement?.value?.trim() === "") ? bankingDescriptionDefault : (bankingDescriptionElement?.value ?? bankingDescriptionDefault);
            let accountName = (accountNameElement?.value?.trim() === "") ? accountNameDefault : (accountNameElement?.value ?? accountNameDefault);

            let amount = 0;
            if (amountElement) {
                let value = amountElement.value.trim();
                if (value !== "") {
                    amount = value + "000";
                }
            }
            let srcNew = "https://img.vietqr.io/image/" + bankId + "-" + accountId
                + "-print.jpg?amount=" + amount
                + "&addInfo="+ bankingDescription
                +"&accountName=" + accountName;
            const qrImg = document.getElementById("qrCode");
            qrImg.src = srcNew;
            console.log(srcNew);
            
        };

        document.getElementById("clearAmount").addEventListener("click", function () {
            amountElement.value = "";
            bankingDescriptionElement.value = "";
            createQR();
        });
        
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
        crossorigin="anonymous"></script>
</body>

</html>
